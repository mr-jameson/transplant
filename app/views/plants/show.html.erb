

<div class="card-columns"> 
        <div class="card tex-center border-success">
                <%= image_tag((@plant.image if @plant.image.attached?), class: "card-img-top stretched-link", alt: "image of plant") %>
                <div class="card-body">
                    <h5 class="card-title"><%= link_to @plant.name, plant_path(@plant) %>
                    </h5>
                    <button data-stripe="payment" class="btn btn-primary">Buy <%= number_to_currency((@plant.price)/100) %></button>
                    <p class="card-text"><%= @plant.description %></p>
                      <ul class="list-group list-group-flush">
                         <li class="list-group-item">Location: <%= @plant.address.suburb if @plant.address %></li>
                         <li class="list-group-item">Light Requirements: <%= @plant.light.capitalize %></li>
                          <li class="list-group-item">Size: <%= @plant.size.capitalize %></li>
                          <li class="list-group-item">Pot: <%= @plant.pot %></li>
                          <li class="list-group-item">Delivery Method: <%= @plant.postage %></li>
                      </ul>
                </div>
        </div>
</div>  

<script src="https://js.stripe.com/v3/"></script>

<script>
  document
    .querySelector("[data-stripe='payment']")
    .addEventListener("click", () => {
      const stripe = Stripe(
        "<%= Rails.application.credentials.dig(:stripe, :public_key) %>"
      );

      stripe.redirectToCheckout({
        sessionId: "<%= @session_id %>"
      });
    });
</script>